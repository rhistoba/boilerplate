---
title: [WIP]私の考えるRails+Vue.jsのベストプラクティス(1)
date: 2019-08-28
---

## What is この記事

この記事はRailsのフロントエンドに
Vue.jsを使うための私なりの知見をまとめたものとなっています。

## Railsと近年のフロントエンド事情

Railsのフロントエンドの選択肢として、長らくjQueryだけが本命だった時代があった。
RailsではHTMLの中にJavaScriptのコードを混入させない「控えめなJavaScript」がベストプラクティスとして提唱され、開発者もそれに従いjQueryをフロントエンドに使い続けていた。

しかし近年ではAngularやReact、Vue.jsといった
先進的なフロントエンドフレームワークが登場し、
もはやjQueryだけに頼るのは時代遅れな風潮が出てきた。
RailsでもWebpackerの導入により、
近代的なJavaScriptの開発がRailsプロジェクトの中でもできるようになり、
先述のフレームワークの導入も簡単にできるようになっている。

AngularやReact、Vue.jsといったフロントエンドフレームワークは、
コンポーネントという画面を構成する部品を組み合わせて、
全体の画面を構築するコンポーネントベースの開発を得意としている。
DOM操作により画面に変更がある場合は、
差分のコンポーネントを入れ替えるだけでよくなり、
高速に画面表示が行えるというメリットがある。

しかも、これらのフレームワークはルーティングや複雑な画面の状態管理までも、
サーバーサイドを介さずにフロントエンド側で行うことができてしまう。
「ブラウザアプリでもネイティブアプリの様にインタラクティブな画面にしたい」
という世間の要望を叶えるために生み出された
すばらしいツールなのである。

一方で、Railsはサーバからフロントエンドまで高速に構築してサービスをいち早く立ち上げられる利点を持っているが、
近年のフロントエンドフレームワークとの組み合わせはどうか？
と言われると、簡単にはいかないだろう。

まずRailsは基本的にサーバがHTMLを返すようになっている。
RailsのActionViewという仕組みにより、
データベースから取得した値を、HTMLに埋め込むことをRubyの世界で行えるようになっているからだ。

しかし近年のフロントエンドフレームワークは、
多くにおいてサーバサイドに期待するレスポンスはJSONであり、
その中の値によって画面をよしなに変更することを前提としてしている。
サーバからHTMLを受け取って、それを画面で切り貼りするようでは、
近代的なフロントエンドとは言えないのが現状だろう。

ではRailsはJSONだけを返すAPIとして作成して、
フロントエンドとバックエンドを分ければいいのでは、
と思われるかもしれない。
しかし、それではオールインワンで手早くサービスが作れるRailsの利点が損なわれてしまう。
サーバインフラ構築の手間が余計にかかるし、
バックエンドだけなら、より高速で型安全な言語やフレームワークが魅力的に思えて、わざわざRails APIを選ぶ必要性がなくなるのではないだろうか。

このような事情があるため、
私はRailsを使うメリットを享受しながら、
近代的なフレームワークを使う道を考えた。

今回紹介するのはRailsとVue.jsを組み合わせである。
Railsのフロントからバックエンド構築までの手軽さと、
Vue.jsによるインタラクティブな画面の作成がなるべく両立できるような方法をこれから述べていく。

## Rails+Vue.jsの組み合わせの方針

それでは、どのようにしてRailsとVue.jsを組み合わせようか？

Vue.jsの導入において、Railsでは従来のSprocketsではなく、
Rails5.1から導入され、Rails6では標準となった[Webpacker](https://github.com/rails/webpacker)を使うことを前提として話を進める。

案の一つとして、
Railsのサーバサイドには標準でルーティング機能が付いているが、
フロント側ではそれを使わず、Vue.jsでルーティングを頑張る方針はどうだろうか？


